#!/usr/bin/perl
################################################################################
# mq event web interface
################################################################################

################################################################################
#   L I B R A R I E S  
################################################################################
use strict;

use CGI qw(:standard);
use CGI::Carp qw(warningsToBrowser fatalsToBrowser);

use http;
use top ;
use qmgr;

################################################################################
#   G L O B A L S  
################################################################################
my %menu = 
(
 0=> { "cmd"  =>"open",
       "dscr" => "open events"},
 1=> { "cmd"  => "history" ,
       "dscr" => "event history", },
 2=> { "cmd"  => "report",
       "dscr" => "event reports" }
);

my $wwwDir = "/var/mq_misc/www/" ;

################################################################################
#   C O M M A N D   L I N E  
################################################################################

my $_attr = cmdLn ;

################################################################################
#   M A I N  
################################################################################

my $_qmgr = readEventFiles $wwwDir ;

openHeader "/develop/css", "top.css", "qmgr.css", "event.css" ;
showTop $_attr, \%menu;

exists $_attr->{cmd} &&
       $_attr->{cmd} eq 'open' &&
       showQmgr $_attr, $_qmgr ;


closeHeader ;

