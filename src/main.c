/******************************************************************************/
/* change title on for new project                                            */
/******************************************************************************/

/******************************************************************************/
/*   I N C L U D E S                                                          */
/******************************************************************************/

// ---------------------------------------------------------
// system
// ---------------------------------------------------------
#include <libgen.h>

// ---------------------------------------------------------
// own 
// ---------------------------------------------------------
#include "main.h"

/******************************************************************************/
/*   D E F I N E S                                                            */
/******************************************************************************/

/******************************************************************************/
/*   M A C R O S                                                              */
/******************************************************************************/

/******************************************************************************/
/*   P R O T O T Y P E S                                                      */
/******************************************************************************/
int initPrg( int argc, const char* argv[] ) ;

/******************************************************************************/
/*                                                                            */
/*                                  M A I N                                   */
/*                                                                            */
/******************************************************************************/
#ifndef __TDD__

int main(int argc, const char* argv[] )
{
  int sysRc ;

#if(0)
  sysRc = handleCmdLn( argc, argv ) ;
  if( sysRc != 0 ) goto _door ;

  const char *logName = getStrAttr( "log" ) ;
  
  if( logName == NULL ) ;

  initLogging( "var/log/main.log", INF ) ;
  logger( LSTD_PRG_START, basename( (char*) argv[0] ) ) ;
#endif

  sysRc = initPrg( argc, argv ) ;
  if( sysRc != 0 ) goto _door ;

_door :

  return sysRc ;
}

#endif

/******************************************************************************/
/*                                                                            */
/*   F U N C T I O N S                                                        */
/*                                                                            */
/******************************************************************************/

int initPrg( int argc, const char* argv[] )
{
  int sysRc ;

  sysRc = handleCmdLn( argc, argv ) ;
  if( sysRc != 0 ) goto _door ;

  const char *logName = getStrAttr( "log" ) ;
  if( logName == NULL ) ;

  sysRc = initLogging( "var/log/main.log", INF ) ;
  if( sysRc != 0 ) goto _door ;

  logger( LSTD_PRG_START, basename( (char*) argv[0] ) ) ;
  
_door :
  return sysRc ;
}
